"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8882],{28120:(e,t,r)=>{r.d(t,{X:()=>L,r:()=>O});var n,o,a=r(12115);let i="3.1.0",s="pkce-code-verifier";!function(e){e.s="string",e.i="integer",e.b="boolean"}(n||(n={})),function(e){e.token_bundle="kinde_token",e.access_token="kinde_access_token",e.id_token="kinde_id_token",e.user="user",e.refresh_token="kinde_refresh_token"}(o||(o={}));class c extends Error{}function u(e,t){let r;if("string"!=typeof e)throw new c("Invalid token specified: must be a string");t||(t={});let n=+(!0!==t.header),o=e.split(".")[n];if("string"!=typeof o)throw new c(`Invalid token specified: missing part #${n+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(o)}catch(e){throw new c(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new c(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}async function l(e){return function(e){let t=Array.from(new Uint8Array(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(await function(e){let t=new TextEncoder().encode(e);return window.crypto.subtle.digest("SHA-256",t)}(e))}function d(){let e=new Uint32Array(28);return window.crypto.getRandomValues(e),Array.from(e,e=>("0"+e.toString(16)).substr(-2)).join("")}c.prototype.name="InvalidTokenError";let f=e=>{let t=Math.floor(Date.now()/1e3);return e.exp+60>t},h=async(e,t)=>{let r=d(),n=d(),o=await l(n);return sessionStorage.setItem(`${s}-${r}`,JSON.stringify({codeVerifier:n,appState:t})),{state:r,code_challenge:o,url:new URL(e)}},p=(()=>{let e={};return{reset:()=>{e={}},getItem:t=>e[t],removeItem:t=>{delete e[t]},setItem:(t,r)=>{e[t]=r}}})(),g=(e,t="access_token")=>{let r=p.getItem(`kinde_${t}`);return r?{name:e,value:r[e]}:null},m=(e,t="access_token")=>{let r=g(e,t);return r&&r.value},w=(e,t,r)=>{let o=m("feature_flags"),a=o&&o[e]?o[e]:{};if(null==a.v&&null==t)throw Error(`Flag ${e} was not found, and no default value has been provided`);if(r&&a.t&&r!==a.t)throw Error(`Flag ${e} is of type ${n[a.t]} - requested type ${n[r]}`);return{code:e,type:n[a.t||r],value:null==a.v?t:a.v,is_default:null==a.v}},_=(e,t)=>{try{return w(e,t,"b").value}catch(e){return console.error(e),e}},y=(e,t)=>{try{return w(e,t,"i").value}catch(e){return console.error(e),e}},k=(e,t)=>{try{return w(e,t,"s").value}catch(e){return console.error(e),e}},v=()=>({orgCodes:m("org_codes","id_token")??[]}),b=["iss","azp"],S=(e,t)=>{if(!e)throw Error("ID token is required");if(b.forEach(r=>{if(!e.payload[r])throw Error(`(${r}) claim is required.`);if(e.payload[r]!==t[r])throw Error(`${r} claim mismatch. Expected: "${t[r]}", Received: "${e.payload[r]}"`)}),"RS256"!==e.header.alg)throw Error(`Unsupported signature alg. Expected: "RS256", Received: "${e.header.alg}"`);if(t.aud){if(!Array.isArray(e.payload.aud))throw Error("(aud) claim must be an array");if(!e.payload.aud.includes(t.aud))throw Error(`(aud) claim mismatch. Expected: "${t.aud}", Received: "${e.payload.aud.join(", ")}"`)}if(!f(e.payload))throw Error("Token expired");return!0},I=e=>"kinde.com"!==new URL(e).hostname.split(".").slice(-2).join("."),$=async e=>{if(!e)throw Error("Please provide your Kinde credentials");if(e!==Object(e))throw Error("The Kinde SDK must be initiated with an object");let{audience:t,client_id:r,domain:n,is_dangerously_use_local_storage:a=!1,redirect_uri:c,logout_uri:l=c,on_redirect_callback:d,scope:b="openid profile email offline",proxy_redirect_uri:$,_framework:E,_frameworkVersion:C}=e;if(t&&"string"!=typeof t)throw Error("Please supply a valid audience for your api");if(b&&"string"!=typeof b)throw Error("Please supply a valid scope");if(!c||"string"!=typeof e.redirect_uri)throw Error("Please supply a valid redirect_uri for your users to be redirected after successful authentication");if(!n||"string"!=typeof n)throw Error("Please supply a valid Kinde domain so we can connect to your account");if("boolean"!=typeof a)throw TypeError("Please supply a boolean value for is_dangerously_use_local_storage");let P=r||"spa@live",R="localhost"===location.hostname||"127.0.0.1"===location.hostname,U=!R&&!a&&I(n),O=R||a,T={audience:t,client_id:P,redirect_uri:c,authorization_endpoint:`${n}/oauth2/auth`,token_endpoint:`${n}/oauth2/token`,requested_scopes:b,domain:n,_framework:E,_frameworkVersion:C},x=e=>{if(!e||e.error)return;let a=u(e.id_token),i=u(e.id_token,{header:!0}),s=u(e.access_token),c=u(e.access_token,{header:!0}),l={iss:n,azp:r,aud:t};S({payload:a,header:i},{...l,aud:r}),S({payload:s,header:c},l),p.setItem(o.token_bundle,e),p.setItem(o.access_token,s),p.setItem(o.id_token,a),p.setItem(o.user,{id:a.sub,given_name:a.given_name,family_name:a.family_name,email:a.email,picture:a.picture}),O?localStorage.setItem(o.refresh_token,e.refresh_token):p.setItem(o.refresh_token,e.refresh_token)},A=async({tokenType:e}={tokenType:o.access_token})=>{let t=O?localStorage.getItem(o.refresh_token):p.getItem(o.refresh_token);if(t||U)try{let r=await fetch(T.token_endpoint,{method:"POST",...U&&{credentials:"include"},headers:new Headers({"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","Kinde-SDK":`
            ${T._framework||"JavaScript"}/${T._frameworkVersion||i}`}),body:new URLSearchParams({client_id:T.client_id,grant_type:"refresh_token",...!U&&t&&{refresh_token:t}})}),n=await r.json();if(x(n),e===o.id_token)return n.id_token;return n.access_token}catch(e){console.error(e)}},L=async e=>{let t=p.getItem(o.token_bundle);return t&&f(p.getItem(e))?e===o.access_token?t.access_token:t.id_token:await A({tokenType:e})},F=async()=>await L(o.access_token),j=async()=>await L(o.id_token),z=async()=>{let e=p.getItem(o.access_token);return!!e&&(!!f(e)||(await A(),!0))},K=async e=>{let t=e.get("code"),r=e.get("state"),n=e.get("error");n&&console.error(`Error returned from authorization server: ${n}`);let o=sessionStorage.getItem(`${s}-${r}`);if(o){let{appState:e,codeVerifier:n}=JSON.parse(o);try{let o=await fetch(T.token_endpoint,{method:"POST",...U&&{credentials:"include"},headers:new Headers({"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","Kinde-SDK":`${T._framework||"JavaScript"}/${T._frameworkVersion||i}`}),body:new URLSearchParams({client_id:T.client_id,code:t,code_verifier:n,grant_type:"authorization_code",redirect_uri:T.redirect_uri})}),a=await o.json();x(a);let c=new URL(window.location.toString());c.search="",sessionStorage.removeItem(`${s}-${r}`);let u=V();window.history.pushState({},"",c),d&&d(u,e)}catch(e){console.error(e),sessionStorage.removeItem(`${s}-${r}`)}}else console.error("Invalid state")},D=async e=>{let{app_state:r,prompt:n,is_create_org:o,org_name:a="",org_code:i,authUrlParams:s={}}=e,{state:u,code_challenge:l,url:d}=await h(T.authorization_endpoint,r),f={redirect_uri:c,client_id:P,response_type:"code",scope:T.requested_scopes,code_challenge:l,code_challenge_method:"S256",state:u};n&&(f.prompt=n),i&&(f.org_code=i),o&&(f.is_create_org=String(o),f.org_name=a);let p=new URLSearchParams(Object.assign(s,f));t&&t.trim().split(/\s+/).forEach(e=>{p.append("audience",e)}),d.search=String(p),window.location.href=d.toString()},N=async e=>{await D({...e,prompt:"create"})},q=async e=>{await D({...e})},J=async e=>{await D({...e,prompt:"create",is_create_org:!0})},V=()=>p.getItem(o.user),G=async()=>{let e=await F(),t={Accept:"application/json",Authorization:`Bearer ${e}`};try{let e=await fetch(`${T.domain}/oauth2/v2/user_profile`,{method:"GET",headers:t}),r=await e.json();return p.setItem(o.user,{id:r.sub,given_name:r.given_name,family_name:r.family_name,email:r.email,picture:r.picture}),p.getItem(o.user)}catch(e){console.error(e)}},B=async()=>{let e=new URL(`${T.domain}/logout`);try{p.reset(),O&&localStorage.removeItem(o.refresh_token);let t=new URLSearchParams({redirect:l});e.search=String(t),window.location.href=e.toString()}catch(e){console.error(e)}},H=async()=>{let e=new URLSearchParams(window.location.search);M(e)?await K(e):(U||O)&&await A()},M=e=>{if(!e.has("code"))return!1;let{protocol:t,host:r,pathname:n}=window.location,o=$||`${t}//${r}${n}`;return o===c||o===`${c}/`};return await H(),{getToken:F,getIdToken:j,getUser:V,getUserProfile:G,login:q,logout:B,register:N,isAuthenticated:z,createOrg:J,getClaim:g,getFlag:w,getBooleanFlag:_,getStringFlag:k,getIntegerFlag:y,getPermissions:()=>{let e=m("org_code");return{permissions:m("permissions")??[],orgCode:e}},getPermission:e=>{let t=m("org_code");return{isGranted:(m("permissions")??[]).some(t=>t===e),orgCode:t}},getOrganization:()=>({orgCode:m("org_code")}),getUserOrganizations:v}};var E=function(){return(E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function C(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})}function P(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var R={isAuthenticated:!1,isLoading:!0},U=(0,a.createContext)(E({},R)),O=function(){var e=(0,a.useContext)(U);if(void 0===e)throw Error("Oooops! useKindeAuth must be used within a KindeProvider");return e},T={INITIALISED:function(e,t){return E(E({},e),{isAuthenticated:!!t.user,user:t.user,isLoading:!1,error:void 0})},LOGOUT:function(e){return E(E({},e),{isAuthenticated:!1,user:void 0})},ERROR:function(e,t){return E(E({},e),{isLoading:!1,error:t.error})}},x=function(e,t){return T[t.type]?T[t.type](e,t):e},A=function(){window.history.replaceState({},document.title,window.location.pathname)},L=function(e){var t=e.audience,r=e.scope,n=e.clientId,o=e.children,i=e.domain,s=e.isDangerouslyUseLocalStorage,c=void 0!==s&&s,u=e.redirectUri,l=e.onRedirectCallback,d=void 0===l?A:l,f=e.logoutUri,h=(0,a.useState)(),p=h[0],g=h[1],m=(0,a.useReducer)(x,R),w=m[0],_=m[1];(0,a.useEffect)(function(){try{C(void 0,void 0,void 0,function(){var e;return P(this,function(o){switch(o.label){case 0:return[4,$({audience:t,scope:r,client_id:n,domain:i,is_dangerously_use_local_storage:c,redirect_uri:u,logout_uri:f,on_redirect_callback:d,_framework:"React",_frameworkVersion:"3.0.28"})];case 1:return e=o.sent(),g(e),[2]}})})}catch(e){console.error(e)}return function(){}},[t,r,n,i,c,u,f]),(0,a.useEffect)(function(){var e=!0;return function(){if(p&&e)try{var t=p.getUser();_({type:"INITIALISED",user:t})}catch(e){console.log(e),_({type:"ERROR",error:"login error"})}}(),function(){e=!1}},[p]);var y=(0,a.useCallback)(function(e){return p.login(e)},[p]),k=(0,a.useCallback)(function(e){return p.register(e)},[p]),v=(0,a.useCallback)(function(){return p.logout()},[p]),b=(0,a.useCallback)(function(e,t){return p.getClaim(e,t)},[p]),S=(0,a.useCallback)(function(e,t,r){return p.getFlag(e,t,r)},[p]),I=(0,a.useCallback)(function(e,t){return p.getBooleanFlag(e,t)},[p]),O=(0,a.useCallback)(function(e,t){return p.getIntegerFlag(e,t)},[p]),T=(0,a.useCallback)(function(e,t){return p.getStringFlag(e,t)},[p]),L=(0,a.useCallback)(function(){return p.getPermissions()},[p]),F=(0,a.useCallback)(function(e){return p.getPermission(e)},[p]),j=(0,a.useCallback)(function(){return p.getOrganization()},[p]),z=(0,a.useCallback)(function(){return p.getUserOrganizations()},[p]),K=(0,a.useCallback)(function(e){return p.createOrg(e)},[p]),D=(0,a.useCallback)(function(){return C(void 0,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,p.getToken()];case 1:return e=t.sent(),[3,3];case 2:throw console.error(t.sent());case 3:return[2,e]}})})},[p]),N=(0,a.useCallback)(function(){return C(void 0,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,p.getIdToken()];case 1:return e=t.sent(),[3,3];case 2:throw console.error(t.sent());case 3:return[2,e]}})})},[p]),q=(0,a.useCallback)(function(){return p.getUser()},[p]),J=(0,a.useMemo)(function(){return E(E({},w),{getToken:D,getIdToken:N,login:y,register:k,logout:v,createOrg:K,getBooleanFlag:I,getClaim:b,getFlag:S,getIntegerFlag:O,getPermissions:L,getPermission:F,getOrganization:j,getStringFlag:T,getUserOrganizations:z,getUser:q})},[w,D,N,y,k,v,K,b,L,F,j,z,q]);return a.createElement(U.Provider,{value:J},o)}},35695:(e,t,r)=>{var n=r(18999);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}}]);